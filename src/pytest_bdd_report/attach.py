from pytest_bdd_report.extensions.screenshot import screenshot_repo


def screenshot_file(path: str, feature_name: str, scenario_name: str) -> None:
    """
    Attach the screenshot file to the report generated by pytest-bdd-report
    """
    try:
        with open(path, "rb") as image_file:
            image_bytes = image_file.read()
            if not image_bytes:
                return  # No bytes read from the file; do nothing
            screenshot_repo.add(feature_name, scenario_name, image_bytes)
    except FileNotFoundError as e:
        print(f"Error: File not found - {e}")
    except Exception as e:
        print(f"An error occurred: {e}")


def screenshot(image_bytes: bytes, feature_name: str, scenario_name: str) -> None:
    """
    Attach the screenshot to the report generated by pytest-bdd-report
    """
    try:
        screenshot_repo.add(feature_name, scenario_name, image_bytes)
    except ValueError as e:
        print(f"Error while attaching the screenshot: {e}")
